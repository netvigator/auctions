explore test_plus, take advantage more
https://pypi.python.org/pypi/django-test-plus/1.0.22

run at least monthly
https://pyup.io/account/repos/github/netvigator/auctions/
sign in with github

added model, hit save, when to model index instead of model detail, but cannot duplicate

in Search, max length for a single key word is 98


searching SearchAddOrUpdateForm needs more testing between Create and Update
check Update remove category!

searching should fail gracefully if violating duplicate search

read up on testfixtures
http://testfixtures.readthedocs.io/en/latest/django.html
try to implement
if cannot, remove from requirements/local.txt


find where the logs are stored!


test save model (request.user problem saving new model), fixed by
1) in the views: adding get_form_kwargs()
2) in the form __init__ method: self.user = kwargs.pop('user')


searching/utils
handle search executed OK but returned no items

need some tests in core/tests/test_utils_ebay.py and categories/tests/test_utils.py


set up search tips page!


check whether submodel functionality will id A-326B as Altec 326
check whether itemsfound & useritemsfound 162946585770 get processed (entered manually)


had single form per model, now have 2, create & update, only testing create, need to test update

implement or remove bMustHaveBrand (inverse of bGenericModel?)

fill in iItemHits in searchlogs




http://127.0.0.1:8000/models/?previous=16&page=17
<< 1 … 16 … 16 17  (current)  18 >>
     15   15


tell all select_related calls which fields to select!!!



need to add to brandcategories (in categories)


put updated query string on Edit buttons in detail templates


282920157755
Hi-Fi NEWS magazine 5\/1997 MARANTZ CD Thorens AVI amplifier CD player CELESTION
should find magazine not Marantz 5



take out of brands.mixins:
        if not hasattr( self, 'object' ) or self.object is None:
            # work around testing glitch
            self.object = QuickObject()
        if not hasattr( self.object, 'cTitle' ):
            # work around testing glitch
            self.object.cTitle = ''


implement getOldRecordToRecycleGenerator for ItemsFound, UserItemsFound, searchlogs


McIntosh MX110-Z Stereo Tube Preamplifier Preamp w/Tuner, ALT to C22 C20 C11
should find MX110-Z

should be able to change 603-b to 603-B, as of now, cannot!

implement tests for both search errors sLastPageZeroEntries & sSuccessButZeroResultsCollectableTVs_ID_16


ALTEC LANSING N-800-8K CROSSOVER DIVIDING NETWORK 846B VALENCIA WORKING PAIR
Vintage Speakers
Consumer Electronics Vintage Electronics Vintage Audio & Video Vintage Speakers


Matched Pair of Altec N 800 F Crossovers removed from 9844-A system TESTED
should find crossover


**Vintage** Jensen H-970 Coaxial Speaker_Professional Series


pair heavy factory jbl c36 speaker cabinets with 075, d131? d130? + crossovers
should find c36

updated 2019-06-07
change a model brand or category:
IntegrityError at /searching/item_found/269093/edit/
duplicate key value violates unique constraint "useritemsfound_iItemNumb_id_iUser_id_iModel_id_53e6b351_uniq"
DETAIL:  Key ("iItemNumb_id", "iUser_id", "iModel_id")=(283006335023, 1, 3598) already exists.

also:
duplicate key value violates unique constraint "useritemsfound_iItemNumb_id_iUser_id_iM_42d93cee_uniq"
DETAIL:  Key ("iItemNumb_id", "iUser_id", "iModel_id", "iBrand_id")=(323727674061, 1, 4449, 952) already exists.


form error (cannot search in auctions code)
WARNING/ForkPoolWorker-5] iItemNumb -- <ul class="errorlist"><li>Item found with this Ebay item number already exists.</li></ul>
then (can search in auctions code)
WARNING/ForkPoolWorker-5] _storeItemFound() returned None -- 123191330931


ALTEC 128B Thermeguard Tube Mono Amplifier Amp EL34 Western electric era - Works
got Western electric EL34 tube


Tung-Sol 5881 (6L6WGB) amplifier tube. TV-7 test NOS. for Bendix USA SHIPS ONLY
found 6L6WGB not 5881


test:
sEbayErrorResponse


cannot update
JBL Model Lancer 77
Model number or name*
Considered a hit if this text is found (optional)
L77
cannot reverse Lancer 77 & L77


need to fill out test_get_single_active_item_then_store() in archive/test_utils.py

NOS WESTERN ELECTRIC 300A 300B TUBES ORIGINAL BOXES
153071850409
removed?


10 BLACK PLATE 6X4 6X4W MULLARD RCA TUNG SOL TUBES DYNACO HEATHKIT AMPS + 8 DGET
should find 6X4 not 10

Lot of 10 Vintage Vacuum Tubes - TUNG-SOL 6AU6A - Tested
should find 6AU6A


KT88 JAN TESLA 1984 NOS Rare Joint Army Navy Distributed by RCA 6550 KT90
should find KT88 not 6550
EL34 AEG/TFK AEG/Telefunken power output tube 6CA7 2pc. matched pair
should find EL34 not 6CA7
RCA 5881 Vintage Vacuum Tube - Brown Base - 6L6WGB guitar amp radio
should find 5881 not 6L6WGB
2 NIB RCA 5881 (6L6GB)(6L6WGB) amplifier tubes. 1973 production. TV-7 test NOS.
should find 5881 not 6L6WGB
2 Altec Lansing 612 Cabinets Enclosure w/ 605A Duplex Speakers N 1600C Crossover
info after with or w/ should be discounted
VINTAGE JENSEN H 222 12" COAXIAL 2 WAY SPEAKER IN WORKING CONDITION
should find H-222 not H
Altec 806-8A Driver 811 B Horn
should find 806-8A Driver not 811 B Horn
Vintage Largest JBL 3182 Crossover Network Altec Dual Woofer 4520 2440 375
Tung-Sol 6520 vacuum tubes (two). Upgraded 6AS7G.
should find 6520 not 6AS7G



follow up on 372290232805 get brand (not WE)


UserItemsFound.tGotPics is not implememted yet

recalculate hit stars option if you change the stars on a model/brand/category?

Other Hits for this Item
need links!


FileExistsError: [Errno 17] File exists: '/home/rick/Devel/auctions/auctionbot/media/Item_Pictures/30/26'
/home/Common/pyPacks/Dir/Get.py
makedirs( sDir )


set iOldCutOff in config rather than in archive/tasks.py

archive.utils
# 2018-08-08 DoesNotExist: ItemFound matching query does not exist.


IntegrityError at /models/add/
duplicate key value violates unique constraint "models_cTitle_iBrand_id_iCategory_id_iUser_id_44cf8c8a_uniq"
DETAIL:  Key ("cTitle", "iBrand_id", "iCategory_id", "iUser_id")=(CA-5, 930, 175, 1) already exists.

should catch


while running server and choosing items to archive, getting lots of errors
[WARNING] get_response: Not Found: /favicon.ico
but cannot find favicon.ico!


do a model search, if there are to many hits for one page, the link to page 2 forgets the query string
must fix!

if you edit an user item found and change to the model of an existing user item found for that item, you hit an error
should handle gracefully


choose add a model, change mind, hit cancel, but cannot,
screen insists title must be filled in


If you put in 12AX7A and turn on submodels OK, give error if Look For has 12AX7.


search can fail but cLastResult = Success -- not right


ebay api search by keyword seems not to accept list of negative key words w/o any positive,
must investigate!

want for tube amp search:
-akai -hitachi -kenwood -magnavox -mitsubishi -pioneer -realistic -sansui -toshiba -yamaha



searching/utilsearch
search executed OK but returned zero items
now need to handle better, zero results are more common



searching/utilsearch.py
FixMe! zero results are more common now


need to gracefully handle search failure when internet non-functioning



should handle more gracefully:
no active records in searching/tests/ItemHitsLog.log!
AssertionError: -2 not greater than 0 : auction end dates are all past, API test is WAY OVERDUE!



searching title, already exclude what comes after "for"
should also exclude what comes after "used with"


2019-02-18
klipsch klipschorn belle la scala cornwall heresy k77 k-77 tweeter alnico
303064871725
title for tweeter, lists speakers that use the tweeter
really only want the tweeter hit
need to edit item found hits


192828711588
exclued it once, it should not come back!


test each and every template tag!!!!


look up cancelled item
<p class="error-header__headline">We looked everywhere.</p><h1>Looks like this page is missing. If you still need help, visit our


glitch on edit of new Hickok tube tester model
put in 605, then realized it should be 605A with generic model
tried to edit, but error 605A already exists,
but it already existed for Altec driver, not Hickok tube tester

2019-05-03
editing item, move it to different brand and model, must move to different brand first
if the model + new brand already exists, app crashes, need to check first and handle better


2019-05-05 too long and redundant
from core.templatetags.core_tags

2019-05-12
already had 604-16X, should not be able to add 604-16x
should be able to edit model/brand/category from keepers list!

2019-05-17 email from Sentry
AttributeError: module 'anymail.backends.mailgun' has no attribute 'MailgunBackend'
  File "django/utils/module_loading.py", line 23, in import_string
    return getattr(module, class_name)

2019-05-19
already had 4300A, could add another without warning

2019-05-26 message from Sentry.io
Invalid HTTP_HOST header: 'linksman.ru'. You may need to add 'linksman.ru' to ALLOWED_HOSTS.


2019-06-04 hit Select All while browsing finders with zero stars, need UnSelect All option


2019-06-30 huge bug!
had 192961084641 Electro-Voice EV T-25A Mid Range Driver Pair with EV 8HD horns + mounts
had both EV Drivers T-25A & T-25-A
deleted T-25A
now cannot access 192961084641 Electro-Voice EV T-25A Mid Range Driver Pair with EV 8HD horns + mounts


2019-08-26
core.mixins.FormValidMixin: how to return invalid cuz of IntegrityError (unique constraint violation)?

click on keeper
'Keeper' object has no attribute 'getUserItemsFoundForKeeper'


2019-09-01
# ### after updating ebay categories, check whether        ###
# ### searches that were connected are still connected !!! ###


2019-10-27
deleteKeeperUserItem() implemented, but flash message not working
does code flush formerly newer items that were not deleted?

2019-11-07
if user already has A-7, d/n let user add A7
if user already has A-7 (name), d/n let user add A-7 or A7
if user already has A-7, d/n let user add A-7 (name)

2019-11-20 keepers.getSingleItemThenStore()
for useritemsfound and userkeepers, should be user specific !!!

2019-11-25 refine ModelFormValidatesTitle in core/forms.py

2019-12-08
form did not save for item 233420619849
i2ndCatHeirarchy -- <ul class="errorlist"><li>Select a valid choice. That choice is not one of the available choices.</li></ul>
_storeItemFound() returned None -- 233420619849
error line above in searching/utils.py
item in searching/tests/__init__.py
need to test save

2019-12-11 learn from test_urls.py, update

2019-12-16
finders/models.py
on finders list for models, categories and brands, want the link to go to the view not edit, not right, still troubleshooting
+    #def get_absolute_url(self):
+        ##
+        #return getReverseWithUpdatedQuery(
+                #'finders:edit',
+                #kwargs = { 'pk': self.pk, 'tModify': self.tModify } )
+
     def get_absolute_url(self):
         #
-        return getReverseWithUpdatedQuery(
-                'finders:edit',
-                kwargs = { 'pk': self.pk, 'tModify': self.tModify } )
+        return reverse( 'finders:hit', kwargs = { 'pk': self.pk } )

2109-12-20 update:
on finders list for models, categories and brands, want the link to go to the same view as on the finders index

2109-12-20
if you edit a useritemfound and the stars get updated, must update user finder!!!
or even add a user finder if one does not exist yet!!!
184083500388


2019-12-22 have some orphan keepers -- keepers with no userkeeper row
all are old -- there is no row in itemsfound

create temp table of orphan keepers:

create table temp_orphan_keepers as
select "iItemNumb" from keepers k
    where not exists
    ( select 1 from userkeepers uk where uk."iItemNumb_id" = k."iItemNumb" ) ;

verify there are no itemsfound for the oprhans:

SELECT
    count(*)
FROM
    itemsfound if
    WHERE
    EXISTS (
        SELECT 1
        FROM temp_orphan_keepers tok
        WHERE tok."iItemNumb" = if."iItemNumb" ) ;

challenge: find hits for orphan keepers


2019-12-23 is bMustHaveBrand redundant?  is bGenericModel enough?

2019-12-26 TestPlus has CBVTestCase for testing views, maybe better than WebTest
to be implemented: SetUpBrandsCategoriesModelsViewTestPlus in core.utils_test


2019-12-29 adding a search, priority pull down d/n omit already selected priorities

2020-01-03 tar picture file errors

tar: 12/37/18/66/123718665781-06.jpg: Read error at byte 0, while reading 512 bytes: Input/output error
tar: 12/37/02/14/123702140206-05.jpg: Read error at byte 0, while reading 10240 bytes: Input/output error
tar: 12/37/02/14/123702140206-00.jpg: File shrank by 176962 bytes; padding with zeros
tar: 13/29/83/54/132983542301-02.jpg: File shrank by 1848 bytes; padding with zeros
tar: 13/29/83/54/132983542301-00.jpg: Read error at byte 0, while reading 7680 bytes: Input/output error
tar: 13/29/83/93/132983936754-00.jpg: Read error at byte 0, while reading 9216 bytes: Input/output error
tar: 13/30/03/92/133003924054-05.jpg: Read error at byte 0, while reading 8704 bytes: Input/output error
tar: 13/30/00/59/133000595165-01.jpg: Read error at byte 0, while reading 10240 bytes: Input/output error
tar: 13/30/01/44/133001441513-07.jpg: Read error at byte 0, while reading 8704 bytes: Input/output error
tar: 13/30/01/39/133001392752-05.jpg: Read error at byte 0, while reading 3072 bytes: Input/output error
tar: 13/30/01/39/133001392752-03.jpg: Read error at byte 0, while reading 9216 bytes: Input/output error
tar: 13/30/01/52/133001525765-05.jpg: Read error at byte 0, while reading 2560 bytes: Input/output error
tar: 13/30/05/96/133005962170-00.jpg: Read error at byte 0, while reading 8704 bytes: Input/output error

tar: 29/26/86/32/292686328400-08.jpg: Read error at byte 0, while reading 9728 bytes: Input/output error
tar: 29/26/86/32/292686328400-06.jpg: File shrank by 263167 bytes; padding with zeros
tar: 29/26/86/09/292686098723-00.jpg: Read error at byte 0, while reading 2560 bytes: Input/output error
tar: 29/29/06/43/292906430336-01.jpg: Read error at byte 0, while reading 2048 bytes: Input/output error
tar: 29/29/06/94/292906942932-00.jpg: Read error at byte 0, while reading 7680 bytes: Input/output error
tar: 29/29/06/94/292906942932-01.jpg: File shrank by 325134 bytes; padding with zeros
tar: 29/29/60/74/292960742595-01.jpg: Read error at byte 0, while reading 3584 bytes: Input/output error
tar: 29/29/60/55/292960550795-07.jpg: Read error at byte 0, while reading 1024 bytes: Input/output error
tar: 29/29/60/55/292960550795-00.jpg: Read error at byte 0, while reading 3584 bytes: Input/output error
tar: 29/29/60/94/292960947511-01.jpg: File shrank by 45123 bytes; padding with zeros
tar: 29/29/60/94/292960947511-02.jpg: Read error at byte 0, while reading 8704 bytes: Input/output error
tar: 29/29/60/63/292960638468-00.jpg: Read error at byte 0, while reading 8192 bytes: Input/output error

